/* =========================================================
   Element Plus: Autofill Patch (CTO-grade)
   Targets: Chrome / Edge / Safari (-webkit-autofill)
   Goals:
   - No white autofill background in dark mode
   - Text/caret match theme tokens
   - No autofill flash
   - Covers input, textarea, and common EP internals
========================================================= */

/* ----------------------------------------------
   0) Optional: local vars (safe defaults)
---------------------------------------------- */
:root {
    --autofill-bg: var(--input-bg, var(--color-card));
    --autofill-text: var(--text-color);
    --autofill-placeholder: color-mix(in srgb, var(--muted-color) 75%, transparent);
}

/* ----------------------------------------------
   1) Base autofill (all themes)
---------------------------------------------- */
.el-input__inner:-webkit-autofill,
.el-input__inner:-webkit-autofill:hover,
.el-input__inner:-webkit-autofill:focus,
.el-input__inner:-webkit-autofill:active,
.el-textarea__inner:-webkit-autofill,
.el-textarea__inner:-webkit-autofill:hover,
.el-textarea__inner:-webkit-autofill:focus,
.el-textarea__inner:-webkit-autofill:active,
.el-date-editor .el-range-input:-webkit-autofill,
.el-date-editor .el-range-input:-webkit-autofill:hover,
.el-date-editor .el-range-input:-webkit-autofill:focus,
.el-date-editor .el-range-input:-webkit-autofill:active {
    /* Paint autofill background using tokens */
    -webkit-box-shadow: 0 0 0 1000px var(--autofill-bg) inset !important;
    box-shadow: 0 0 0 1000px var(--autofill-bg) inset !important;

    /* Theme-correct text + caret */
    -webkit-text-fill-color: var(--autofill-text) !important;
    caret-color: var(--autofill-text) !important;

    /* Reduce autofill flash; browsers treat this specially */
    transition: background-color 9999s ease-out 0s, color 9999s ease-out 0s !important;
}

/* Placeholder tone (some browsers ignore on autofill; harmless) */
.el-input__inner:-webkit-autofill::placeholder,
.el-textarea__inner:-webkit-autofill::placeholder,
.el-date-editor .el-range-input:-webkit-autofill::placeholder {
    color: var(--autofill-placeholder) !important;
}

/* ----------------------------------------------
   2) Dark mode override
   Use your real dark input surface if you prefer it:
   - If your inputs are darker than cards, use --color-bg
---------------------------------------------- */
html[data-theme="dark"] .el-input__inner:-webkit-autofill,
html[data-theme="dark"] .el-input__inner:-webkit-autofill:hover,
html[data-theme="dark"] .el-input__inner:-webkit-autofill:focus,
html[data-theme="dark"] .el-input__inner:-webkit-autofill:active,
html[data-theme="dark"] .el-textarea__inner:-webkit-autofill,
html[data-theme="dark"] .el-textarea__inner:-webkit-autofill:hover,
html[data-theme="dark"] .el-textarea__inner:-webkit-autofill:focus,
html[data-theme="dark"] .el-textarea__inner:-webkit-autofill:active,
html[data-theme="dark"] .el-date-editor .el-range-input:-webkit-autofill,
html[data-theme="dark"] .el-date-editor .el-range-input:-webkit-autofill:hover,
html[data-theme="dark"] .el-date-editor .el-range-input:-webkit-autofill:focus,
html[data-theme="dark"] .el-date-editor .el-range-input:-webkit-autofill:active {
    /* Prefer your dark input surface (often var(--color-bg)) */
    -webkit-box-shadow: 0 0 0 1000px var(--input-bg, var(--color-bg)) inset !important;
    box-shadow: 0 0 0 1000px var(--input-bg, var(--color-bg)) inset !important;

    -webkit-text-fill-color: var(--text-color) !important;
    caret-color: var(--text-color) !important;
}

/* ----------------------------------------------
   3) Select / internal inputs (defensive)
   Some EP components render native <input> internally.
---------------------------------------------- */
.el-select input:-webkit-autofill,
.el-select input:-webkit-autofill:hover,
.el-select input:-webkit-autofill:focus,
.el-select input:-webkit-autofill:active,
.el-autocomplete input:-webkit-autofill,
.el-autocomplete input:-webkit-autofill:hover,
.el-autocomplete input:-webkit-autofill:focus,
.el-autocomplete input:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 1000px var(--autofill-bg) inset !important;
    box-shadow: 0 0 0 1000px var(--autofill-bg) inset !important;
    -webkit-text-fill-color: var(--autofill-text) !important;
    caret-color: var(--autofill-text) !important;
    transition: background-color 9999s ease-out 0s, color 9999s ease-out 0s !important;
}

html[data-theme="dark"] .el-select input:-webkit-autofill,
html[data-theme="dark"] .el-autocomplete input:-webkit-autofill {
    -webkit-box-shadow: 0 0 0 1000px var(--input-bg, var(--color-bg)) inset !important;
    box-shadow: 0 0 0 1000px var(--input-bg, var(--color-bg)) inset !important;
    -webkit-text-fill-color: var(--text-color) !important;
    caret-color: var(--text-color) !important;
}