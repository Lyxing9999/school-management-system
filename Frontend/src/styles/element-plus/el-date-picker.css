/* assets/css/element-plus/el-date-picker.css */

/* =========================================================
   Element Plus: el-date-picker / el-date-editor / range popper
   FINAL
   - Token-driven input shell
   - Range input shrink-safe (tooltip wrapper safe)
   - Desktop: clean, not huge, stable width
   - Mobile <= 768: centered modal, stack months vertically
   - Scroll body + sticky footer
========================================================= */

/* ---------------------------------------------------------
   0) Input/editor width foundation
--------------------------------------------------------- */
.el-date-editor {
    width: 100%;
    min-width: 0;
}

/* ---------------------------------------------------------
   1) Input shell (single + range surface)
   NOTE: range editor surface IS the wrapper itself
--------------------------------------------------------- */
.el-date-editor .el-input__wrapper,
.el-date-editor.el-range-editor.el-input__wrapper {
    background: var(--input-bg, var(--color-card)) !important;
    box-shadow: 0 0 0 1px var(--input-border, var(--border-color)) inset !important;
    border-radius: var(--border-radius-base, 10px) !important;
    transition:
        box-shadow var(--transition-base),
        transform var(--transition-base),
        background-color var(--transition-base),
        border-color var(--transition-base);
}

/* Hover */
.el-date-editor .el-input__wrapper:hover,
.el-date-editor.el-range-editor.el-input__wrapper:hover {
    box-shadow: 0 0 0 1px color-mix(in srgb,
            var(--input-border, var(--border-color)) 40%,
            var(--color-primary) 60%) inset !important;
}

/* Focus */
.el-date-editor.is-focus .el-input__wrapper,
.el-date-editor.is-focus.el-range-editor.el-input__wrapper {
    box-shadow: 0 0 0 1px var(--color-primary) inset !important;
    transform: translateY(-0.5px);
}

/* Text + placeholder */
.el-date-editor .el-input__inner,
.el-date-editor .el-range-input {
    color: var(--text-color) !important;
}

.el-date-editor .el-input__inner::placeholder,
.el-date-editor .el-range-input::placeholder {
    color: color-mix(in srgb, var(--muted-color) 75%, transparent) !important;
}

/* Icons */
.el-date-editor .el-input__prefix,
.el-date-editor .el-input__suffix,
.el-date-editor .el-range__icon,
.el-date-editor .el-icon,
.el-date-editor .el-range-separator {
    color: var(--muted-color) !important;
}

.el-date-editor.is-focus .el-input__prefix,
.el-date-editor.is-focus .el-input__suffix,
.el-date-editor.is-focus .el-range__icon,
.el-date-editor.is-focus .el-icon {
    color: var(--color-primary) !important;
}

/* Disabled */
.el-date-editor.is-disabled .el-input__wrapper,
.el-date-editor.is-disabled.el-range-editor.el-input__wrapper {
    background: color-mix(in srgb,
            var(--input-bg, var(--color-card)) 65%,
            var(--color-bg) 35%) !important;
    box-shadow: 0 0 0 1px var(--border-color) inset !important;
    transform: none !important;
    opacity: 0.92 !important;
    cursor: not-allowed !important;
}

/* ---------------------------------------------------------
   2) CRITICAL: daterange shrink rules
   Fix: "cannot be small" + keeps it responsive inside grid
--------------------------------------------------------- */
.el-date-editor.el-date-editor--daterange.el-range-editor {
    width: 100% !important;
    min-width: 0 !important;
}

/* EP uses wrapper as the surface */
.el-date-editor.el-date-editor--daterange.el-range-editor.el-input__wrapper {
    width: 100% !important;
    min-width: 0 !important;
    display: flex !important;
    align-items: center !important;
    gap: 6px;
}

/* allow both inputs to shrink */
.el-date-editor.el-date-editor--daterange.el-range-editor .el-range-input {
    min-width: 0 !important;
    width: 0 !important;
    flex: 1 1 0% !important;
    text-align: center;
}

/* ---------------------------------------------------------
   3) Tooltip wrapper safety
   Some layouts wrap date editor inside tooltip trigger.
   This prevents width “clamping”.
--------------------------------------------------------- */
.df-date .el-tooltip__trigger,
.df-date .el-tooltip__trigger>* {
    display: flex !important;
    width: 100% !important;
    min-width: 0 !important;
}

/* ---------------------------------------------------------
   4) Popper surface (teleported)
   NOTE: Keep generic styling clean and consistent
--------------------------------------------------------- */
.el-picker__popper,
.el-date-picker,
.el-date-range-picker,
.el-time-panel {
    background: color-mix(in srgb, var(--color-card) 96%, var(--color-bg) 4%) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: 14px !important;
    box-shadow: 0 16px 34px var(--card-shadow) !important;
    color: var(--text-color) !important;
    overflow: hidden !important;
}

.el-popper__arrow::before {
    background: color-mix(in srgb, var(--color-card) 96%, var(--color-bg) 4%) !important;
    border: 1px solid var(--border-color) !important;
}

/* Header */
.el-date-picker__header,
.el-date-range-picker__header {
    padding: 12px 14px !important;
    border-bottom: 1px solid color-mix(in srgb, var(--border-color) 70%, transparent) !important;
}

/* Footer */
.el-picker-panel__footer {
    border-top: 1px solid color-mix(in srgb, var(--border-color) 70%, transparent) !important;
    background: color-mix(in srgb, var(--color-card) 94%, var(--color-bg) 6%) !important;
    padding: 10px 12px !important;
}

/* ---------------------------------------------------------
   5) DateRange popper sizing (desktop clean)
   - Remove default .el-popper padding (it makes it feel huge)
   - Use a controlled width (not massive, not tiny)
--------------------------------------------------------- */
.date-range-popper.el-popper {
    padding: 0 !important;
}

/* Desktop/tablet: controlled width */
@media (min-width: 769px) {
    .date-range-popper .el-date-range-picker {
        width: 640px !important;
        max-width: calc(100vw - 24px) !important;
    }

    /* Ensure EP default side-by-side is preserved */
    .date-range-popper .el-date-range-picker__content {
        display: table-cell !important;
        width: 50% !important;
        padding: 16px !important;
        /* keep EP spacing but controlled */
    }

    /* Keep the internal divider subtle */
    .date-range-popper .el-date-range-picker__content.is-left {
        border-right: 1px solid color-mix(in srgb, var(--border-color) 75%, transparent) !important;
    }
}

/* ---------------------------------------------------------
   6) Mobile: centered modal + stack months
   - This avoids “big” and avoids off-screen issues
--------------------------------------------------------- */
@media (max-width: 768px) {

    /* Popper behaves like a modal */
    .date-range-popper.el-popper {
        position: fixed !important;
        top: 50% !important;
        left: 50% !important;
        right: auto !important;
        bottom: auto !important;
        transform: translate(-50%, -50%) !important;

        width: calc(100vw - 24px) !important;
        max-width: 420px !important;
        /* slightly roomy but not huge */
        min-width: 0 !important;

        margin: 0 !important;
        overflow: hidden !important;
        box-sizing: border-box !important;
    }

    /* Hide arrow in modal mode */
    .date-range-popper .el-popper__arrow {
        display: none !important;
    }

    /* Ensure picker respects modal width + manages height */
    .date-range-popper .el-picker-panel.el-date-range-picker {
        width: 100% !important;
        min-width: 0 !important;
        display: flex !important;
        flex-direction: column !important;
        max-height: 70vh !important;
    }

    /* Scroll content, keep footer stable */
    .date-range-popper .el-picker-panel__body-wrapper {
        flex: 1 1 auto !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch;
        min-width: 0 !important;
        display: flex !important;
        flex-direction: column !important;
    }

    .date-range-popper .el-picker-panel__body {
        min-width: 0 !important;
    }

    /* STACK the two calendars */
    .date-range-popper .el-date-range-picker__content {
        display: block !important;
        width: 100% !important;
        min-width: 0 !important;
        padding: 12px !important;
        box-sizing: border-box !important;
    }

    .date-range-popper .el-date-range-picker__content.is-left,
    .date-range-popper .el-date-range-picker__content.is-right {
        float: none !important;
        border: none !important;
    }

    /* Divider between months */
    .date-range-popper .el-date-range-picker__content.is-left {
        border-bottom: 1px solid var(--border-color) !important;
        padding-bottom: 10px !important;
        margin-bottom: 10px !important;
    }

    /* Footer remains visible */
    .date-range-popper .el-picker-panel__footer {
        flex: 0 0 auto !important;
        background: var(--color-card) !important;
        border-top: 1px solid var(--border-color) !important;
    }

    /* Hide shortcuts sidebar */
    .date-range-popper .el-picker-panel__sidebar {
        display: none !important;
    }
}